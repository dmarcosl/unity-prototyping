<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#D03042" data-resizable-sidebar="false"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2025-03-10T14:45:10.525717"><!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-8YKCVR45PQ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-8YKCVR45PQ');
</script><title>Character Controller | Unity Prototyping</title><script type="application/json" id="virtual-toc-data">[{"id":"design-a-character-controller","level":0,"title":"Design a Character Controller","anchor":"#design-a-character-controller"},{"id":"character-movement-with-nav-mesh","level":0,"title":"Character Movement with Nav Mesh","anchor":"#character-movement-with-nav-mesh"},{"id":"user-input","level":0,"title":"User Input","anchor":"#user-input"},{"id":"ranged-attack","level":0,"title":"Ranged Attack","anchor":"#ranged-attack"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b575/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Character Controller | Unity Prototyping"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Unity Prototyping Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/character-controller.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Character Controller | Unity Prototyping"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/character-controller.html#webpage",
    "url": "writerside-documentation/character-controller.html",
    "name": "Character Controller | Unity Prototyping",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Unity Prototyping Help"
}</script><!-- End Schema.org --></head><body data-id="Character-Controller" data-main-title="Character Controller" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs=""><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Unity Prototyping  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Character-Controller" id="Character-Controller.md">Character Controller</h1><section class="chapter"><h2 id="design-a-character-controller" data-toc="design-a-character-controller">Design a Character Controller</h2><p id="-klk3z5_7">To design a character controller we need to know what is the player perspective:</p><ul class="list _bullet" id="-klk3z5_8"><li class="list__item" id="-klk3z5_13"><p><span class="control" id="-klk3z5_15">First-Person</span>: From the perspective of the character the player sees the world through their eyes.</p></li><li class="list__item" id="-klk3z5_14"><p><span class="control" id="-klk3z5_16">Third-Person</span>: See the character in the world, the view can be top-down, &frac34; angle or over-the-shoulder. This perspective allows us to watch the character animations</p></li></ul><p id="-klk3z5_9">How the character will move:</p><ul class="list _bullet" id="-klk3z5_10"><li class="list__item" id="-klk3z5_17"><p><span class="control" id="-klk3z5_20">WASD / Joystick</span>: Basic FPS movement</p></li><li class="list__item" id="-klk3z5_18"><p><span class="control" id="-klk3z5_21">Automatic</span>: Character moves on its own based on story elements or world interactions</p></li><li class="list__item" id="-klk3z5_19"><p><span class="control" id="-klk3z5_22">Click to Move</span>: Click a point on the ground or an interactive object to tell the character to move there</p></li></ul><p id="-klk3z5_11">How is the camera controlled:</p><ul class="list _bullet" id="-klk3z5_12"><li class="list__item" id="-klk3z5_23"><p><span class="control" id="-klk3z5_25">Mouse / Joystick</span>: Basic camera control</p></li><li class="list__item" id="-klk3z5_24"><p><span class="control" id="-klk3z5_26">Automatic</span>: The camera moves based on the movement of the character</p></li></ul></section><section class="chapter"><h2 id="character-movement-with-nav-mesh" data-toc="character-movement-with-nav-mesh">Character Movement with Nav Mesh</h2><p id="-klk3z5_27">NavMesh is Unity's <span class="control" id="-klk3z5_37">movement and pathfinder system</span>.</p><p id="-klk3z5_28">In this process we'll:</p><ul class="list _bullet" id="-klk3z5_29"><li class="list__item" id="-klk3z5_38"><p><span class="control" id="-klk3z5_42">Set up the NavMesh</span></p></li><li class="list__item" id="-klk3z5_39"><p>Create <span class="control" id="-klk3z5_43">walkable surfaces</span> and <span class="control" id="-klk3z5_44">non-walkable obstacles</span></p></li><li class="list__item" id="-klk3z5_40"><p><span class="control" id="-klk3z5_45">Add an Agent</span> (an object that move around using the NavMesh)</p></li><li class="list__item" id="-klk3z5_41"><p><span class="control" id="-klk3z5_46">Bake the NavMesh</span></p></li></ul><p id="-klk3z5_30">First of all, we need to open the Navigation window, in Windows &gt; Navigation.</p><p id="-klk3z5_31">To set walkable surfaces, select all walkable GameObjects and set them as <span class="control" id="-klk3z5_47">Static in the Inspector</span>. Then, in the Navigation window, set the option <span class="control" id="-klk3z5_48">Navigation Area</span> to Walkable.</p><p id="-klk3z5_32">To set obstacles, select all obstacles / walls, set them as Static, and in the Navigation Area select Non Walkable.</p><p id="-klk3z5_33">Create a Capsule that will be the player's character, and add it the <span class="control" id="-klk3z5_49">component Nav Mesh Agent</span>.</p><p id="-klk3z5_34">Go to the Bake tab of the Navigation window, and push the <span class="control" id="-klk3z5_50">Bake button</span>. When finish, the NavMesh will be saved as an asset, and it will appear in the Scene as a blue cap above the walkable area.</p><figure id="-klk3z5_35"><img alt="Prototyping10" src="images/prototyping10.jpg" title="Prototyping10" width="1200" height="888"></figure><p id="-klk3z5_36">If there are spaces not cover by the NavMesh, can be because they are not touching, or there is a slope or step too high. To fix it, you can adjust the Bake settings or the affected GameObjects, and them re-bake.</p></section><section class="chapter"><h2 id="user-input" data-toc="user-input">User Input</h2><p id="-klk3z5_51">It's the time to add functionality to the character controller for user input. We'll:</p><ul class="list _bullet" id="-klk3z5_52"><li class="list__item" id="-klk3z5_69"><p><span class="control" id="-klk3z5_72">Set the target destination</span> with WASD</p></li><li class="list__item" id="-klk3z5_70"><p><span class="control" id="-klk3z5_73">Add mouse-look</span>, to control the camera with the mouse</p></li><li class="list__item" id="-klk3z5_71"><p><span class="control" id="-klk3z5_74">Add controller input</span>, so the player can use a gamepad</p></li></ul><p id="-klk3z5_53">In order to make the character to move, we need to add to the previous Capsule (the one that we created with a Nav Mesh Agent) a Rigidbody and a Script.</p><p id="-klk3z5_54">This is an example Script, where at start the goal is set to the current position of the GameObject, to not allow it to move at the start, and in each update, the goal is updated with the input that the player will be using.</p><p id="-klk3z5_55"><code class="code" id="-klk3z5_75">Input.GetAxis(&quot;Horizontal&quot;)</code></p><ul class="list _bullet" id="-klk3z5_56"><li class="list__item" id="-klk3z5_76"><p>Get positive values moving to the right, and negative to the left</p></li><li class="list__item" id="-klk3z5_77"><p>Catch the A, S, left arrow and right arrow keys, and left and right movement of the gamepad</p></li></ul><p id="-klk3z5_57"><code class="code" id="-klk3z5_78">Input.GetAxis(&quot;Vertical&quot;)</code></p><ul class="list _bullet" id="-klk3z5_58"><li class="list__item" id="-klk3z5_79"><p>Get positive values moving to the top, and negative to the bottom</p></li><li class="list__item" id="-klk3z5_80"><p>Catch the S, W, top arrow and bottom arrow keys, and top and bottom movement of the gamepad</p></li></ul><div class="code-block" data-lang="csharp">
private Vector3 goal;
private NavMeshAgent agent;
//public GameObject cameraParent;

void Start() {
    Cursor.visible = false;

    goal = transform.position;
    agent = GetComponent&lt;NavMeshAgent&gt;();
}

void Update() {
    goal = transform.position
        + Vector3.right * Input.GetAxis(&quot;Horizontal&quot;)
        + Vector3.forward * Input.GetAxis(&quot;Vertical&quot;);
//        + cameraParent.transform.right * Input.GetAxis(&quot;Horizontal&quot;)
//        + cameraParent.transform.forward * Input.GetAxis(&quot;Vertical&quot;);

    Agent.destination = goal;
}
</div><p id="-klk3z5_60">With this, we can move the character, but we don't know where is it aiming to. To achieve it, we can add a GameObject to its front, such as a plane, and add it a material made with an image of an arrow with a transparent background, and setting the Rendering Mode to Cutout.</p><figure id="-klk3z5_61"><img alt="Prototyping11" src="images/prototyping11.jpg" title="Prototyping11" width="400" height="377"></figure><figure id="-klk3z5_62"><img alt="Prototyping12" src="images/prototyping12.jpg" title="Prototyping12" width="400" height="328"></figure><p id="-klk3z5_63">To make the Camera follows the character position, we need to add a Script to the Camera. In the <span class="control" id="-klk3z5_81">Unity Standard Asset</span> there's a Script called <span class="control" id="-klk3z5_82">SmoothFollow</span> that allows us to do this. Just add it to the camera and select the character GameObject.</p><p id="-klk3z5_64">To add mouse-look to the camera, we need another Script, that also comes with the Unity Standard Assets. We need to create a empty GameObject and make it the parent of the Camera, and add it the Script Simple Mouse Rotator, and adjust the Rotation Range values. Also set the rotation of the parent to 0.</p><p id="-klk3z5_65">To add the gamepad look, we need to add an Project Input Property and edit the Script. Go to Edit &gt; Project Settings &gt; Input, search the Horizontal and Vertical Properties with the Type &quot;Joystick Axis&quot;, duplicate them, give them a new name and change the Type to &quot;4th axis (Joysticks)&quot; for Horizontal, and &quot;5th axis (Joysticks)&quot; for Vertical.</p><p id="-klk3z5_66">Then open the Script and edit the following lines:</p><div class="code-block" data-lang="csharp">
inputH = CrossPlatformInputManager.getAxis(&quot;Mouse X&quot;) + Input.getAxis(&quot;HorizontalRight&quot;) * 0.5f;
inputV = CrossPlatformInputManager.getAxis(&quot;Mouse Y&quot;) + Input.getAxis(&quot;VerticalRight&quot;) * 0.5f;
</div><p id="-klk3z5_68">At this point, if we move the camera and the player, but the movement of the player is not natural, because their right and forward directions are following the World's right and forward directions. To fix this, the character has to follow the camera direction (using the commented lines of the script and attaching the parent of the Camera to it).</p></section><section class="chapter"><h2 id="ranged-attack" data-toc="ranged-attack">Ranged Attack</h2><p id="-klk3z5_83">The final step in the character controller is set up a ranged attack. We'll:</p><ul class="list _bullet" id="-klk3z5_84"><li class="list__item" id="-klk3z5_99"><p><span class="control" id="-klk3z5_102">Set up a projectile prefab</span>, which can be a bullet or a spell</p></li><li class="list__item" id="-klk3z5_100"><p><span class="control" id="-klk3z5_103">Take the User Input</span> to fire the projectile</p></li><li class="list__item" id="-klk3z5_101"><p><span class="control" id="-klk3z5_104">Handle the impact and damage</span></p></li></ul><p id="-klk3z5_85">We need to create the <span class="control" id="-klk3z5_105">Resources folder</span>, from it Unity will be able to load things into a Scene.</p><p id="-klk3z5_86">Create a projectile and drag and drop it into the Resources folder. It can be as simply as a Particle System simulating a spell.</p><p id="-klk3z5_87">The next thing to do is create a Script and attach it to the character.</p><div class="code-block" data-lang="csharp">
void Update() {
    If (Input.GetButtonDown (&quot;Fire1&quot;)) {
        Instantiate (Resources.load (Resources.load (&quot;Projectile&quot;), transform.position, transform.rotation);
    }
}
</div><p id="-klk3z5_89">Fire1 is the default Input Property of Unity for the left button of the mouse, and the primary button of the gamepad.</p><p id="-klk3z5_90">When one of these buttons are pushed, the prefab Projectile is instantiate in the Scene with the position and rotation of the player.</p><p id="-klk3z5_91">For make the projectiles move, we need to attach them a new Script</p><div class="code-block" data-lang="csharp">
void Update() {
    transform.Translate (Vector3.forward * Time.deltaTime * 10);
}
</div><p id="-klk3z5_93">The final thing we need to add is damaging the enemies when they are hitted with a projectile.</p><p id="-klk3z5_94">To do so, we need to set the Tag &quot;Enemy&quot; to the enemy prefab, and add it a RigidBody component.</p><p id="-klk3z5_95">We also need to add a RigidBody component, with the Is Trigger option, to the projectile prefab, and update its Script with the following:</p><div class="code-block" data-lang="csharp">
void OnTriggerEnter(Collider other) { 
    If (other.tag == &quot;Enemy&quot;) {
        Destroy (other.gameObject);
        Destroy (gameObject);
    }
}
</div><p id="-klk3z5_97">When the projectile collide with a GameObject with the Tag &quot;Enemy&quot;, both GameObjects will be destroyed.</p><p id="-klk3z5_98">We can also add a Audio Source to the projectile to be played at instantiate it.</p></section><div class="last-modified">Last modified: 10 March 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="art-and-sound-integration.html" class="navigation-links__prev">Art and Sound Integration</a><a href="scripted-interactions.html" class="navigation-links__next">Scripted Interactions</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b575/app.js"></script></body></html>